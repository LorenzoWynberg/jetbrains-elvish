{
  "stories": [
    {
      "id": "STORY-101",
      "title": "Fix LSP module dependency for cross-IDE support",
      "intent": "Change from com.intellij.modules.ultimate to com.intellij.modules.lsp to enable LSP in all JetBrains IDEs",
      "acceptance": [
        "plugin.xml uses com.intellij.modules.lsp instead of com.intellij.modules.ultimate",
        "LSP dependency remains optional with config-file attribute",
        "./gradlew build succeeds"
      ],
      "passes": true,
      "depends_on": [],
      "phase": 1,
      "epic": 2,
      "story_number": 1
    },
    {
      "id": "STORY-102",
      "title": "Update minimum IDE version to 2024.3",
      "intent": "Set sinceBuild to 243 to ensure stable LSP API availability across all JetBrains IDEs",
      "acceptance": [
        "build.gradle.kts sinceBuild set to 243",
        "untilBuild allows future versions (no hard cap or high cap)",
        "./gradlew build succeeds",
        "Plugin verification passes"
      ],
      "passes": true,
      "depends_on": ["STORY-101"],
      "phase": 1,
      "epic": 2,
      "story_number": 2
    },
    {
      "id": "STORY-103",
      "title": "Add LSP server startup logging",
      "intent": "Add debug logging to LSP provider to diagnose server startup issues",
      "acceptance": [
        "ElvishLspServerSupportProvider logs when fileOpened is called",
        "Logs include file path and whether LSP is starting",
        "ElvishLspServerDescriptor logs command line being executed",
        "Logs visible in IDE log (Help > Show Log)",
        "./gradlew build succeeds"
      ],
      "passes": true,
      "depends_on": ["STORY-101"],
      "phase": 1,
      "epic": 2,
      "story_number": 3
    },
    {
      "id": "STORY-104",
      "title": "Verify LSP server process starts",
      "intent": "Confirm that elvish -lsp process actually starts when opening .elv files",
      "acceptance": [
        "./gradlew runIde launches successfully",
        "Open any .elv file in sandbox IDE",
        "Verify elvish -lsp process appears in system process list",
        "IDE logs show LSP server started message",
        "No LSP-related errors in IDE logs"
      ],
      "passes": true,
      "depends_on": ["STORY-103"],
      "phase": 2,
      "epic": 2,
      "story_number": 1
    },
    {
      "id": "STORY-105",
      "title": "Test LSP code completion",
      "intent": "Verify that LSP-powered code completion works for Elvish",
      "acceptance": [
        "Type $ in .elv file - variable completion appears",
        "Type partial command name - completion suggestions appear",
        "Type module: (e.g., str:) - module function completions appear",
        "Completion popup shows function signatures where available"
      ],
      "passes": true,
      "depends_on": ["STORY-104"],
      "phase": 2,
      "epic": 2,
      "story_number": 2
    },
    {
      "id": "STORY-106",
      "title": "Test LSP hover documentation",
      "intent": "Verify that hovering over functions shows documentation",
      "acceptance": [
        "Hover over built-in function (e.g., echo, put) shows documentation",
        "Hover over variable shows type information if available",
        "Hover popup appears within reasonable time (<1 second)"
      ],
      "passes": true,
      "depends_on": ["STORY-104"],
      "phase": 2,
      "epic": 2,
      "story_number": 3
    },
    {
      "id": "STORY-107",
      "title": "Test LSP diagnostics",
      "intent": "Verify that syntax errors are reported by the LSP",
      "acceptance": [
        "Introduce syntax error (e.g., unclosed brace) - error highlighting appears",
        "Error message shown in editor gutter or tooltip",
        "Fix error - highlighting disappears",
        "Diagnostics update in real-time as you type"
      ],
      "passes": true,
      "depends_on": ["STORY-104"],
      "phase": 2,
      "epic": 2,
      "story_number": 4
    },
    {
      "id": "STORY-108",
      "title": "Add error handling for missing Elvish binary",
      "intent": "Show clear error message when elvish is not installed or not in PATH",
      "acceptance": [
        "If elvish binary not found, show notification to user",
        "Notification suggests installing Elvish or configuring path in settings",
        "Plugin doesn't crash or spam errors when Elvish missing",
        "LSP gracefully disabled until Elvish available"
      ],
      "passes": true,
      "depends_on": ["STORY-104"],
      "phase": 3,
      "epic": 2,
      "story_number": 1
    },
    {
      "id": "STORY-109",
      "title": "Update documentation for cross-IDE support",
      "intent": "Update all documentation to reflect cross-IDE compatibility",
      "acceptance": [
        "README.md lists all supported JetBrains IDEs",
        "README.md clarifies LSP is free for all users (2025.3+)",
        "docs/DEVELOPMENT.md updated with correct module dependency info",
        "CHANGELOG.md documents the cross-IDE fix"
      ],
      "passes": true,
      "depends_on": ["STORY-107"],
      "phase": 3,
      "epic": 2,
      "story_number": 2
    },
    {
      "id": "STORY-110",
      "title": "Prepare for marketplace submission",
      "intent": "Ensure plugin meets JetBrains Marketplace requirements",
      "acceptance": [
        "Plugin description is clear and complete",
        "Plugin icon (pluginIcon.svg) meets marketplace guidelines",
        "Vendor information is correct",
        "./gradlew buildPlugin produces valid ZIP",
        "Plugin passes JetBrains Plugin Verifier"
      ],
      "passes": false,
      "depends_on": ["STORY-109"],
      "phase": 3,
      "epic": 2,
      "story_number": 3
    }
  ]
}
